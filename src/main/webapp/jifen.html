<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>积分</title>
    <script src="js/jquery-3.3.1.min.js"></script>
    <script>
        var user = "";
        $(function () {
             user = sessionStorage.getItem("userId");
            console.log("这是传过来的"+user);
            alert(".........")
            if (user == null) {
                window.location.href = "/user/login.html";
            }

        })
    </script>
</head>
<body>

<button id="jifen" name="jifen" class="main-container" >积分查询</button>
<button id="jifenxiaofei" name="jifen" class="main-container" >消费积分详情查询</button>
<button id="jifenhuoqu" name="jifen" class="main-container" >获取积分详情查询</button>

<script>

    //积分查询
    $("#jifen").on('click',function(){
        var userId = sessionStorage.getItem("userId");
        var user = {id: userId};
        console.log(user);
        $.ajax({
            url: "/chaXunJiFen",   // 请求路径  url-pattern  基于当前工程的绝对路径
            type: "post",            // 请求的方式，不区分大小写
            async: true,             // 是否异步，true是默认值，false为同步请求
            cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
            datatype: "json",        // 返回类型，text文本、html页面、json数据
            contentType: "application/json;charset=utf-8",
            data: JSON.stringify(user),  // k-v参数
            success: function (data){
                console.log(JSON.stringify(data));
                alert("........");

            },
            error: function (data) {
                alert(".......")
                console.log("数据异常");
            }
        });
    });

    //消费积分详情查询
    $("#jifenxiaofei").on('click',function(){
        var userId = sessionStorage.getItem("userId");
        var user = {id: userId};
        console.log(user);
        $.ajax({
            url: "/chaJiFenXiaoFei",   // 请求路径  url-pattern  基于当前工程的绝对路径
            type: "post",            // 请求的方式，不区分大小写
            async: true,             // 是否异步，true是默认值，false为同步请求
            cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
            datatype: "json",        // 返回类型，text文本、html页面、json数据
            contentType: "application/json;charset=utf-8",
            data: JSON.stringify(user),  // k-v参数
            success: function (data){
                console.log(JSON.stringify(data));
                alert("........");


            },
            error: function (data) {
                alert(".......")
                console.log("数据异常");
            }
        });

    });

    //获取积分详情查询
    $("#jifenhuoqu").on('click',function(){
        var userId = sessionStorage.getItem("userId");
        var user = {id: userId};
        console.log(user);
        $.ajax({
            url: "/chaXunJiFenHuoQu",   // 请求路径  url-pattern  基于当前工程的绝对路径
            type: "post",            // 请求的方式，不区分大小写
            async: true,             // 是否异步，true是默认值，false为同步请求
            cache: false,            // 关闭缓存，目的是为了避免部分浏览器缓存加载出错(IE)
            datatype: "json",        // 返回类型，text文本、html页面、json数据
            contentType: "application/json;charset=utf-8",
            data: JSON.stringify(user),  // k-v参数
            success: function (data){
                console.log(JSON.stringify(data));
                alert("........");
            },
            error: function (data) {
                alert(".......")
                console.log("数据异常");
            }
        });

    });

</script>

</body>
</html>